<UserControl x:Class="Aimmy2.UILibrary.AColorWheel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:Ant="clr-namespace:AntWpf.Controls;assembly=AntWpf"
             xmlns:local="clr-namespace:Aimmy2.UILibrary"
             mc:Ignorable="d"
             d:DesignWidth="282.5"
             d:DesignHeight="310">
    <Grid>
        <Grid x:Name="ViewContainer">
            <Border x:Name="ColorWheelView"
                Height="310"
                Background="#3F3C3C3C"
                CornerRadius="0"
                BorderThickness="1,0,1,0"
                BorderBrush="#3FFFFFFF"
                Visibility="Visible"
                IsHitTestVisible="True">
                <Grid>
                    <!-- Title -->
                    <Label x:Name="ColorWheelTitle"
                       Padding="10,10,10,10"
                       FontFamily="{StaticResource Atkinson Hyperlegible}"
                       Content="{Binding Title, RelativeSource={RelativeSource AncestorType=UserControl}}"
                       Foreground="#DDFFFFFF"
                       VerticalContentAlignment="Center"
                       FontSize="13"
                       FontWeight="Normal"
                       VerticalAlignment="Top"
                       Height="40" />

                    <!-- Color Wheel Container with Shadow -->
                    <Border Width="210"
                        Height="210"
                        Margin="0,50,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        CornerRadius="105">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="20" 
                                          ShadowDepth="0" 
                                          Color="Black" 
                                          Opacity="0.3"/>
                        </Border.Effect>

                        <!-- Color Wheel Canvas -->
                        <Canvas x:Name="ColorWheelCanvas"
                            Width="200"
                            Height="200"
                            Margin="5"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            MouseLeftButtonDown="ColorWheel_MouseDown"
                            MouseMove="ColorWheel_MouseMove"
                            MouseLeftButtonUp="ColorWheel_MouseUp"
                            Cursor="Cross">

                            <!-- Color wheel will be drawn programmatically -->
                            <Ellipse Width="200" Height="200" x:Name="ColorWheelEllipse">
                                <Ellipse.Fill>
                                    <RadialGradientBrush>
                                        <GradientStop Color="White" Offset="0"/>
                                        <GradientStop Color="Red" Offset="1"/>
                                    </RadialGradientBrush>
                                </Ellipse.Fill>
                            </Ellipse>

                            <!-- Inner shadow overlay for depth -->
                            <Ellipse Width="200" Height="200" IsHitTestVisible="False">
                                <Ellipse.Fill>
                                    <RadialGradientBrush>
                                        <GradientStop Color="#00000000" Offset="0.8"/>
                                        <GradientStop Color="#1A000000" Offset="1"/>
                                    </RadialGradientBrush>
                                </Ellipse.Fill>
                            </Ellipse>

                            <!-- Selector Circle -->
                            <Grid x:Name="ColorSelector"
                              Width="20"
                              Height="20"
                              Canvas.Left="90"
                              Canvas.Top="90"
                              IsHitTestVisible="False">
                                <!-- Outer ring -->
                                <Ellipse Width="20"
                                     Height="20"
                                     Stroke="White"
                                     StrokeThickness="2">
                                    <Ellipse.Effect>
                                        <DropShadowEffect BlurRadius="5" 
                                                      ShadowDepth="0" 
                                                      Color="Black" 
                                                      Opacity="0.5"/>
                                    </Ellipse.Effect>
                                </Ellipse>
                                <!-- Inner ring -->
                                <Ellipse Width="16"
                                     Height="16"
                                     Stroke="Black"
                                     StrokeThickness="1"
                                     Margin="2"/>
                                <!-- Center dot -->
                                <Ellipse x:Name="ColorDot"
                                     Width="10"
                                     Height="10"
                                     Fill="Red"
                                     Margin="5"/>
                            </Grid>
                        </Canvas>
                    </Border>

                    <!-- Brightness Slider Section - Compact design matching other controls -->
                    <Grid Height="40" 
                      VerticalAlignment="Bottom" 
                      Margin="0,0,0,50">
                        <Border Background="#1FFFFFFF"
                            CornerRadius="3"
                            Margin="10,5,10,5">
                            <Grid>
                                <Label Content="Brightness"
                                   Foreground="#BBFFFFFF"
                                   FontFamily="{StaticResource Atkinson Hyperlegible}"
                                   FontSize="11"
                                   Padding="10,0,0,0"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Left"/>

                                <!-- Slider with consistent margins like ASlider -->
                                <Grid Margin="75,0,53,0">
                                    <!-- Gradient background track -->
                                    <Border Height="4" 
                                        CornerRadius="2"
                                        VerticalAlignment="Center">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop x:Name="BrightnessGradientStart" Color="Black" Offset="0"/>
                                                <GradientStop x:Name="BrightnessGradientEnd" Color="Red" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>

                                    <Slider x:Name="BrightnessSlider"
                                        Minimum="0"
                                        Maximum="1"
                                        Value="1"
                                        VerticalAlignment="Center"
                                        ValueChanged="BrightnessSlider_ValueChanged"
                                        Thumb.DragCompleted="BrightnessSlider_DragCompleted">
                                        <Slider.Style>
                                            <Style TargetType="Slider">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Slider">
                                                            <Grid>
                                                                <Track x:Name="PART_Track">
                                                                    <Track.Thumb>
                                                                        <Thumb>
                                                                            <Thumb.Template>
                                                                                <ControlTemplate TargetType="Thumb">
                                                                                    <Ellipse Width="14" 
                                                                                         Height="14" 
                                                                                         Fill="White"
                                                                                         Stroke="#FF666666"
                                                                                         StrokeThickness="1">
                                                                                        <Ellipse.Effect>
                                                                                            <DropShadowEffect BlurRadius="4" 
                                                                                                          ShadowDepth="1" 
                                                                                                          Color="Black" 
                                                                                                          Opacity="0.3"/>
                                                                                        </Ellipse.Effect>
                                                                                    </Ellipse>
                                                                                </ControlTemplate>
                                                                            </Thumb.Template>
                                                                        </Thumb>
                                                                    </Track.Thumb>
                                                                </Track>
                                                            </Grid>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Slider.Style>
                                    </Slider>
                                </Grid>
                                <StackPanel
                                VerticalAlignment="Center"
                                HorizontalAlignment="Right" Orientation="Horizontal" Margin="0,0,10,0"
                                >
                                    <TextBox x:Name="BrightnessValue" 
                                Text="100"
                                Foreground="#BBFFFFFF"
                                FontFamily="{StaticResource Atkinson Hyperlegible}"
                                FontSize="11"
                                         BorderBrush="{x:Null}" TextChanged="BrightnessValue_TextChanged" KeyDown="BrightnessValue_KeyDown"/>
                                    <Label Content="%"
                                   Foreground="#BBFFFFFF"
                                   FontFamily="{StaticResource Atkinson Hyperlegible}"
                                   FontSize="11"
                                       Padding="-1"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Left"/>

                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>

                    <!-- Current Color Preview - Updated styling -->
                    <Border Width="282.5"
                        Height="50"
                        VerticalAlignment="Bottom"
                        CornerRadius="0">

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Live preview circle -->
                            <Ellipse x:Name="ColorPreview"
                                 Grid.Column="0"
                                 Width="30"
                                 Height="30"
                                 HorizontalAlignment="Center"
                                 Margin="10,0,10,0"
                                 Stroke="#FF666666"
                                 StrokeThickness="1">
                                <Ellipse.Fill>
                                    <SolidColorBrush Color="#722ED1"/>
                                </Ellipse.Fill>
                                <Ellipse.Effect>
                                    <DropShadowEffect BlurRadius="5" 
                                                  ShadowDepth="0" 
                                                  Color="Black" 
                                                  Opacity="0.3"/>
                                </Ellipse.Effect>
                            </Ellipse>

                            <Border Grid.Column="1"
                                Margin="0,10,10,10"
                                Padding="5,0,5,0"
                                VerticalAlignment="Center">
                                <StackPanel Orientation="Vertical"
                                        VerticalAlignment="Center">
                                    <Label Content="Color Del Tema Actual"
                                       Foreground="#BBFFFFFF"
                                       FontFamily="{StaticResource Atkinson Hyperlegible}"
                                       FontSize="11"
                                       Padding="0"
                                       Margin="0,0,0,2"/>
                                    <TextBox x:Name="HexValue"
                                       Text="#722ED1"
                                       Foreground="#DDFFFFFF"
                                       FontFamily="Consolas"
                                       FontSize="13"
                                       FontWeight="SemiBold"
                                       Padding="0" TextChanged="HexValue_TextChanged" BorderBrush="{x:Null}"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </Border>
                </Grid>
            </Border>
            <!-- Arrow button to toggle media/colors -->
            <Button x:Name="ArrowButton"
                    Content=">"
                    FontSize="16"
                    FontWeight="Bold"
                    Foreground="#BBFFFFFF"
                    Background="Transparent"
                    BorderThickness="0"
                    Padding="10,0,15,0"
                    VerticalAlignment="Top"
                    HorizontalAlignment="Right"
                    Visibility="{Binding ShowArrow, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}"
                    Click="ArrowButton_Click" Margin="0,-37,132,0"/>
            <Border x:Name="DragDropView" 
                            Background="#3F3C3C3C"
                            CornerRadius="0"
                            BorderThickness="1,0,1,0"
                            BorderBrush="#3FFFFFFF"
                            Visibility="Collapsed"
                            IsHitTestVisible="False"
                            AllowDrop="True"
                            Drop="DragDropView_Drop"
                            DragEnter="DragDropView_DragEnter"
                            DragLeave="DragDropView_DragLeave">
                <Grid>
                    <!-- Title -->
                    <Label Content="Media Control"
                           Padding="10,10,10,10"
                           FontFamily="{StaticResource Atkinson Hyperlegible}"
                           Foreground="#DDFFFFFF"
                           VerticalContentAlignment="Center"
                           FontSize="13"
                           FontWeight="Normal"
                           VerticalAlignment="Top"
                           Height="40"/>
                    <Grid Margin="20,50,20,20">
                        <Grid x:Name="MediaBackground">
                            <Image x:Name="MediaPreviewImage" 
                                    Stretch="UniformToFill"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"/>
                            <MediaElement x:Name="MediaPreviewPlayer"
                                           Visibility="Collapsed"
                                           IsMuted="True"
                                           LoadedBehavior="Manual"
                                           Stretch="UniformToFill"
                                           HorizontalAlignment="Stretch"
                                           VerticalAlignment="Stretch"/>
                        </Grid>
                        <Border x:Name="DropZone"
                                BorderThickness="2"
                                CornerRadius="3"
                                Background="Transparent"
                                AllowDrop="True">
                            <Border.BorderBrush>
                                <VisualBrush TileMode="Tile" 
                                             Viewport="0,0,8,8" 
                                             ViewportUnits="Absolute">
                                    <VisualBrush.Visual>
                                        <Rectangle StrokeDashArray="1 2" 
                                                   Stroke="#BBFFFFFF" 
                                                   StrokeThickness="1" 
                                                   Width="8" 
                                                   Height="8"/>
                                    </VisualBrush.Visual>
                                </VisualBrush>
                            </Border.BorderBrush>
                            <TextBlock x:Name="DropHintText"
                                       Text="Drag &amp; Drop Media Here"
                                       Foreground="#BBFFFFFF"
                                       FontFamily="{StaticResource Atkinson Hyperlegible}"
                                       FontSize="12"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                        </Border>
                    </Grid>
                    <!-- Media Brightness Slider Section - Compact design matching other controls - Original came from the AColorWheel View.-->
                    <Grid Margin="0,231,0,32">
                        <Border Background="#1FFFFFFF"
                                CornerRadius="3"
                                Margin="28,5,26,5">
                            <Grid>
                                <Label Content="Brightness"
                                       Foreground="#BBFFFFFF"
                                       FontFamily="{StaticResource Atkinson Hyperlegible}"
                                       FontSize="11"
                                       Padding="10,0,0,0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Left"/>
                                <!-- Slider with consistent margins like ASlider -->
                                <Grid Margin="75,0,53,0">
                                    <!-- Gradient background track -->
                                    <Border Height="4" 
                                            CornerRadius="2"
                                            VerticalAlignment="Center">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop x:Name="BrightnessMediaGradientStart" Color="Gray" Offset="0"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>

                                    <Slider x:Name="BrightnessMediaSlider"
                                            Minimum="0"
                                            Maximum="1"
                                            Value="1"
                                            VerticalAlignment="Center"
                                            ValueChanged="BrightnessMediaSlider_ValueChanged"
                                            Thumb.DragCompleted="BrightnessMediaSlider_DragCompleted">
                                        <Slider.Style>
                                            <Style TargetType="Slider">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Slider">
                                                            <Grid>
                                                                <Track x:Name="PART_Track">
                                                                    <Track.Thumb>
                                                                        <Thumb>
                                                                            <Thumb.Template>
                                                                                <ControlTemplate TargetType="Thumb">
                                                                                    <Ellipse Width="14" 
                                                                                             Height="14" 
                                                                                             Fill="White"
                                                                                             Stroke="#FF666666"
                                                                                             StrokeThickness="1">
                                                                                        <Ellipse.Effect>
                                                                                            <DropShadowEffect BlurRadius="4" 
                                                                                                              ShadowDepth="1" 
                                                                                                              Color="Black" 
                                                                                                              Opacity="0.3"/>
                                                                                        </Ellipse.Effect>
                                                                                    </Ellipse>
                                                                                </ControlTemplate>
                                                                            </Thumb.Template>
                                                                        </Thumb>
                                                                    </Track.Thumb>
                                                                </Track>
                                                            </Grid>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Slider.Style>
                                    </Slider>
                                </Grid>
                                <StackPanel VerticalAlignment="Center"
                                            HorizontalAlignment="Right" 
                                            Orientation="Horizontal" 
                                            Margin="0,0,10,0">
                                    <TextBox x:Name="BrightnessMediaValue" 
                                             Text="100"
                                             Foreground="#BBFFFFFF"
                                             FontFamily="{StaticResource Atkinson Hyperlegible}"
                                             FontSize="11"
                                             BorderBrush="{x:Null}" 
                                             TextChanged="BrightnessMediaValue_TextChanged" 
                                             KeyDown="BrightnessMediaValue_KeyDown"/>
                                    <Label Content="%"
                                           Foreground="#BBFFFFFF"
                                           FontFamily="{StaticResource Atkinson Hyperlegible}"
                                           FontSize="11"
                                           Padding="-1"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Left"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <Button x:Name="ClearMedia"
                                Content="&#xED61;"
                                HorizontalAlignment="Right"
                                Background="{x:Null}"
                                BorderBrush="{x:Null}"
                                Foreground="White"
                                FontFamily="Segoe MDL2 Assets"
                                Padding="15,0,15,0"
                                materialDesign:ButtonAssist.CornerRadius="0,5,5,0"
                                BorderThickness="0,0,0,0"
                                FontSize="15"
                                VerticalAlignment="Top"
                                Click="Clear_Click"
                                Margin="0,-230,2,0" 
                                Width="46" 
                                Height="34" />
                    </Grid>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</UserControl>